{% extends 'base.html' %}

{% block title %}All Students{% endblock %}

{% block content %}
<h2> Student Directory</h2>

<!-- Search Form -->
<form method="get" class="mb-4">
    <div class="input-group">
        <input type="text" name="search" class="form-control" 
               placeholder="Search by name..." value="{{ search_query }}">
        <button class="btn btn-primary" type="submit">Search</button>
        {% if search_query %}
        <a href="/students/" class="btn btn-secondary">Clear</a>
        {% endif %}
    </div>
</form>

<a href="/students/create/" class="btn btn-success mb-3">âž• Add New Student</a>

{% if students %}
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Student ID</th>
                <th>Email</th>
                <th>GPA</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td><a href="/students/{{ student.id }}/">{{ student.name }}</a></td>
                <td>{{ student.student_id }}</td>
                <td>{{ student.email }}</td>
                <td>{{ student.gpa }}</td>
                <td>
                    <a href="/students/{{ student.id }}/" class="btn btn-info btn-sm">View</a>
                    <a href="/students/update/{{ student.id }}/" class="btn btn-warning btn-sm">Edit</a>
                    <a href="/students/delete/{{ student.id }}/" class="btn btn-danger btn-sm">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    No students found. <a href="/students/create/">Add the first student</a>
</div>
{% endif %}
{% endblock %}